<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HtmlHelper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">PrimeNumberGenerator</a> &gt; <a href="index.source.html" class="el_package">org.example.primeapi.view</a> &gt; <span class="el_source">HtmlHelper.java</span></div><h1>HtmlHelper.java</h1><pre class="source lang-java linenums">package org.example.primeapi.view;

import org.example.primeapi.model.PrimePayload;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.util.Arrays;
import java.util.Comparator;
import java.util.List;

<span class="nc" id="L12">public class HtmlHelper {</span>



    public static List&lt;String&gt; getMarkdownFiles() {
        try {
<span class="nc" id="L18">            var uri = HtmlHelper.class.getClassLoader().getResource(&quot;docs&quot;);</span>
<span class="nc bnc" id="L19" title="All 2 branches missed.">            if (uri == null) return List.of();</span>

<span class="nc" id="L21">            File docsDir = new File(uri.toURI());</span>
<span class="nc" id="L22">            File[] files = docsDir.listFiles((dir, name) -&gt; name.endsWith(&quot;.md&quot;));</span>
<span class="nc bnc" id="L23" title="All 2 branches missed.">            if (files == null) return List.of();</span>

<span class="nc" id="L25">            return Arrays.stream(files)</span>
<span class="nc" id="L26">                    .sorted(Comparator.comparing(File::getName))</span>
<span class="nc" id="L27">                    .map(File::getName)</span>
<span class="nc" id="L28">                    .toList();</span>

<span class="nc" id="L30">        } catch (Exception e) {</span>
<span class="nc" id="L31">            return List.of(); // fallback if running from inside a JAR</span>
        }
    }

    public static List&lt;String&gt; getMarkdownFilenames() {
        try {
<span class="nc" id="L37">            var uri = HtmlHelper.class.getClassLoader().getResource(&quot;docs&quot;);</span>
<span class="nc bnc" id="L38" title="All 2 branches missed.">            if (uri == null) return List.of();</span>

<span class="nc" id="L40">            File docsDir = new File(uri.toURI());</span>
<span class="nc" id="L41">            File[] files = docsDir.listFiles((dir, name) -&gt; name.endsWith(&quot;.md&quot;));</span>
<span class="nc bnc" id="L42" title="All 2 branches missed.">            if (files == null) return List.of();</span>

<span class="nc" id="L44">            return Arrays.stream(files)</span>
<span class="nc" id="L45">                    .sorted(Comparator.comparing(File::getName))</span>
<span class="nc" id="L46">                    .map(File::getName)</span>
<span class="nc" id="L47">                    .toList();</span>

<span class="nc" id="L49">        } catch (Exception e) {</span>
<span class="nc" id="L50">            return List.of(); // fallback if running from inside a JAR</span>
        }
    }

    public static String buildSidebar(List&lt;String&gt; filenames) {
<span class="nc" id="L55">        StringBuilder sidebar = new StringBuilder(&quot;&lt;div class=\&quot;sidebar\&quot;&gt;&lt;h3&gt;üìÑ Docs&lt;/h3&gt;&lt;ul&gt;&quot;);</span>
<span class="nc bnc" id="L56" title="All 2 branches missed.">        for (String name : filenames) {</span>
<span class="nc" id="L57">            sidebar.append(String.format(&quot;&lt;li&gt;&lt;a href=\&quot;/docs/view/%s\&quot;&gt;%s&lt;/a&gt;&lt;/li&gt;&quot;, name, name));</span>
<span class="nc" id="L58">        }</span>
<span class="nc" id="L59">        sidebar.append(&quot;&lt;/ul&gt;&lt;/div&gt;&quot;);</span>
<span class="nc" id="L60">        return sidebar.toString();</span>
    }

    public static String buildIndexContent(List&lt;String&gt; filenames) {
<span class="nc" id="L64">        StringBuilder content = new StringBuilder(&quot;&lt;h1&gt;üìö Documentation Index&lt;/h1&gt;&lt;ul&gt;&quot;);</span>
<span class="nc bnc" id="L65" title="All 2 branches missed.">        for (String name : filenames) {</span>
<span class="nc" id="L66">            content.append(String.format(&quot;&lt;li&gt;&lt;a href=\&quot;/docs/view/%s\&quot;&gt;%s&lt;/a&gt;&lt;/li&gt;&quot;, name, name));</span>
<span class="nc" id="L67">        }</span>
<span class="nc" id="L68">        content.append(&quot;&lt;/ul&gt;&quot;);</span>
<span class="nc" id="L69">        return content.toString();</span>
    }

    public static String wrapHtml(String sidebar, String contentHtml, boolean includeBacklinks) {
<span class="nc bnc" id="L73" title="All 2 branches missed.">        String backlinks = includeBacklinks ? &quot;&quot;&quot;</span>
        &lt;div class=&quot;backlink&quot;&gt;
            &lt;p&gt;&lt;a href=&quot;/docs/view/prime-algorithms.md&quot;&gt;‚Üê Back to Prime Algorithms Overview&lt;/a&gt;&lt;/p&gt;
            &lt;p&gt;&lt;a href=&quot;/docs&quot;&gt;‚Üê Back to Documentation Index&lt;/a&gt;&lt;/p&gt;
        &lt;/div&gt;
<span class="nc" id="L78">    &quot;&quot;&quot; : &quot;&quot;;</span>

<span class="nc" id="L80">        return &quot;&quot;&quot;</span>
        &lt;html&gt;
        &lt;head&gt;
            &lt;title&gt;Documentation Viewer&lt;/title&gt;
            &lt;style&gt;
                body {
                    margin: 0;
                    font-family: sans-serif;
                    display: flex;
                }
                .sidebar {
                    width: 220px;
                    background-color: #f4f4f4;
                    padding: 1rem;
                    border-right: 1px solid #ddd;
                }
                .sidebar h3 {
                    margin-top: 0;
                }
                .sidebar ul {
                    list-style: none;
                    padding-left: 0;
                }
                .sidebar li {
                    margin: 0.5rem 0;
                }
                .sidebar a {
                    color: #007acc;
                    text-decoration: none;
                }
                .sidebar a:hover {
                    text-decoration: underline;
                }
                .content {
                    flex: 1;
                    padding: 2rem;
                    max-width: 800px;
                }
                h1, h2, h3 {
                    color: #333;
                }
                a {
                    color: #007acc;
                    text-decoration: none;
                }
                a:hover {
                    text-decoration: underline;
                }
                .backlink {
                    margin-top: 3rem;
                    font-size: 0.9rem;
                }
            &lt;/style&gt;
        &lt;/head&gt;
        &lt;body&gt;
        &quot;&quot;&quot; + sidebar + &quot;&quot;&quot;
        &lt;div class=&quot;content&quot;&gt;
        &quot;&quot;&quot; + contentHtml + backlinks + &quot;&quot;&quot;
        &lt;/div&gt;
        &lt;/body&gt;
        &lt;/html&gt;
    &quot;&quot;&quot;;
    }

    public static boolean isValidMarkdownFile(String filename) {
<span class="nc bnc" id="L145" title="All 2 branches missed.">        return HtmlHelper.class.getClassLoader().getResource(&quot;docs/&quot; + filename) != null;</span>
    }

    public static String readMarkdown(String filename) throws IOException {
<span class="nc" id="L149">        try (var in = HtmlHelper.class.getClassLoader().getResourceAsStream(&quot;docs/&quot; + filename)) {</span>
<span class="nc bnc" id="L150" title="All 2 branches missed.">            if (in == null) throw new IOException(&quot;Markdown file not found: &quot; + filename);</span>
<span class="nc" id="L151">            return new String(in.readAllBytes(), java.nio.charset.StandardCharsets.UTF_8);</span>
        }
    }
    public static String convertMarkdownToHtml(String filename, String markdown) {
<span class="nc" id="L155">        String html = MarkdownConverter.toHtml(markdown);</span>
<span class="nc bnc" id="L156" title="All 2 branches missed.">        if (filename.equals(&quot;prime-algorithms.md&quot;)) {</span>
<span class="nc" id="L157">            html += buildAlgorithmTable();</span>
<span class="nc" id="L158">            html += buildRecentRequestTable();</span>
        }
<span class="nc" id="L160">        return html;</span>
    }


    public static String buildAlgorithmTable() {
<span class="nc" id="L165">        return &quot;&quot;&quot;</span>
        &lt;h2&gt;üìä Algorithm Comparison&lt;/h2&gt;
        &lt;table&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;Algorithm&lt;/th&gt;
              &lt;th&gt;Time Complexity&lt;/th&gt;
              &lt;th&gt;Use Case Notes&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;Trial Division&lt;/td&gt;
              &lt;td&gt;O(‚àön)&lt;/td&gt;
              &lt;td&gt;Simple, slow; good for small inputs or teaching&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;Sieve of Eratosthenes&lt;/td&gt;
              &lt;td&gt;O(n log log n)&lt;/td&gt;
              &lt;td&gt;Fast for generating all primes up to n&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;Miller-Rabin&lt;/td&gt;
              &lt;td&gt;O(k log¬≥ n)&lt;/td&gt;
              &lt;td&gt;Probabilistic; efficient for testing if one number is prime&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;Sieve of Atkin&lt;/td&gt;
              &lt;td&gt;O(n) (theoretical)&lt;/td&gt;
              &lt;td&gt;Complex; faster than Eratosthenes for large n&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
    &quot;&quot;&quot;;
    }

    public static String buildRecentRequestTable() {
<span class="nc" id="L202">        List&lt;PrimePayload&gt; recent = PrimeRequestLog.getRecent();</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">        if (recent.isEmpty()) return &quot;&lt;p&gt;No recent /api/primes requests logged.&lt;/p&gt;&quot;;</span>

<span class="nc" id="L205">        StringBuilder table = new StringBuilder(&quot;&quot;&quot;</span>
        &lt;h2&gt;üßÆ Recent Prime Requests&lt;/h2&gt;
        &lt;table&gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;Algorithm&lt;/th&gt;
                    &lt;th&gt;Limit&lt;/th&gt;
                    &lt;th&gt;Threads&lt;/th&gt;
                    &lt;th&gt;Total&lt;/th&gt;
                    &lt;th&gt;Duration (ms)&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
    &quot;&quot;&quot;);

<span class="nc bnc" id="L220" title="All 2 branches missed.">        for (PrimePayload p : recent) {</span>
<span class="nc" id="L221">            table.append(String.format(&quot;&quot;&quot;</span>
        &lt;tr&gt;
            &lt;td&gt;%s&lt;/td&gt;
            &lt;td&gt;%d&lt;/td&gt;
            &lt;td&gt;%d&lt;/td&gt;
            &lt;td&gt;%d&lt;/td&gt;
            &lt;td&gt;%d&lt;/td&gt;
        &lt;/tr&gt;
<span class="nc" id="L229">        &quot;&quot;&quot;, p.getAlgorithm(), p.getLimit(), p.getThreads(), p.getTotal(), p.getDurationMs()));</span>
<span class="nc" id="L230">        }</span>

<span class="nc" id="L232">        table.append(&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;);</span>
<span class="nc" id="L233">        return table.toString();</span>
    }



}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>